<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>VADUM Â· Incentivo</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="./assets/css/estilos.css">
</head>
<body>
 <!-- ====== Header Superior (logo, nombre, perfil/login) ====== -->
<header class="header-superior">
  <nav class="nav-sup">
    <a class="nav-sup__logo" href="./index.html">
      <img src="./assets/img/VADUM-negro.png" alt="VADUM">
      <span class="nav-sup__titulo">Sistema Automatizado de Incentivos Â· VADUM</span>
    </a>
    <div class="nav-sup__espaciador"></div>

    <!-- MenÃº de perfil -->
    <div class="perfil" id="perfilMenu">
      <button class="perfil__btn" id="btnPerfil">
        <span id="usuarioActual">â€¦</span>
        <span class="perfil__avatar">ðŸ‘¤</span>
      </button>
      <div class="perfil__dropdown" id="perfilDropdown">
        <div class="perfil__info">
          <div class="perfil__nombre" id="perfilNombre">Usuario</div>
          <div class="perfil__rol" id="perfilRol">Rol</div>
        </div>
        <a class="perfil__item" href="#" id="irPerfil">Mi perfil</a>
        <button class="perfil__item perfil__salir" id="btnSalir">Cerrar sesiÃ³n</button>
      </div>
    </div>
  </nav>
</header>

<!-- ====== Header Inferior (botones de navegaciÃ³n) ====== -->
<div class="header-inferior" id="barraNavegacion">
  <nav class="nav-inf">
    <!-- Muestra/oculta por rol con data-roles -->
    <a class="nav-btn" id="nav-inicio" href="./index.html" data-roles="admin,supervisor,vigilante,cliente">Inicio</a>
    <a class="nav-btn" id="nav-empleados" href="./empleados.html" data-roles="admin,supervisor">Empleados</a>
    <a class="nav-btn" id="nav-fisica" href="./captura_fisica.html" data-roles="admin,supervisor">FÃ­sica</a>
    <a class="nav-btn" id="nav-mensual" href="./evaluacion_mensual.html" data-roles="admin,supervisor">Mensual</a>
    <a class="nav-btn" id="nav-encuesta" href="./encuesta.html" data-roles="admin,cliente,supervisor">Encuesta</a>
    <a class="nav-btn" id="nav-incentivo" href="./incentivo.html" data-roles="admin,supervisor,vigilante">Incentivo</a>
  </nav>
</div>

<script>
// Marca activo segÃºn archivo
const mapaActivos = {
  'index.html':'nav-inicio',
  'empleados.html':'nav-empleados',
  'captura_fisica.html':'nav-fisica',
  'evaluacion_mensual.html':'nav-mensual',
  'encuesta.html':'nav-encuesta',
  'incentivo.html':'nav-incentivo'
};
const actual = location.pathname.split('/').pop();
const idAct = mapaActivos[actual];
if (idAct) document.getElementById(idAct)?.classList.add('nav-btn--activo');
</script>



  <main class="contenedor">
    <section class="tarjeta">
      <h1 class="titulo">CÃ¡lculo de Incentivo</h1>
      <div class="fila fila--2">
        <div>
          <label class="label">No.Emp</label>
          <input class="input" id="no_emp" value="950001">
        </div>
        <div>
          <label class="label">Mes (dÃ­a 1)</label>
          <input class="input" id="mes" type="date" value="2025-09-01">
        </div>
      </div>
      <div style="margin-top:12px;"><button class="btn" id="btn">Calcular</button></div>
    </section>

    <section class="tarjeta" style="margin-top:16px;">
      <h2 class="subtitulo">Resultado</h2>
      <pre id="salida" style="background:#0e0e0e; border:1px solid #333; border-radius: 10px; padding:12px; white-space:pre-wrap;"></pre>
    </section>
  </main>

  <footer class="footer">Â© VADUM Â· AutomatizaciÃ³n de Incentivos Â· </footer>
  <script src="./assets/js/ui.js"></script>
<script src="./assets/js/auth.js"></script>
  <script>
    document.getElementById('btn').onclick = async ()=>{
      const no_emp = document.getElementById('no_emp').value.trim();
      const mes    = document.getElementById('mes').value;
      const r = await fetch(`../api/index.php?ruta=incentivo/calcular&no_emp=${encodeURIComponent(no_emp)}&mes=${encodeURIComponent(mes)}`).then(r=>r.json());
      document.getElementById('salida').textContent = JSON.stringify(r, null, 2);
      mostrarToast('CÃ¡lculo listo');
    };
  </script>
</body>
</html>
